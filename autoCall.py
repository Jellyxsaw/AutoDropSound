import time

import requests

# æœ¬åœ° API ç«¯é»
API_URL = "http://127.0.0.1:5000/queue/join"

text_list = [
    # è²¨å¹£é¡
    "ç¥è–çŸ³ã€‚ã€‚ã€‚è¾›è‹¦ä½ äº†", "æ©ŸæœƒçŸ³", "é»é‡‘çŸ³", "å¯Œè±ªçŸ³", "æ··æ²ŒçŸ³", "å´‡é«˜çŸ³", "é¡å­", "ç„¡æ•ˆçŸ³", "ç“¦çˆ¾å¯¶ç ", "å®Œç¾å·¥åŒ çŸ³", "é«˜ç´šå·¥åŒ çŸ³", "å¯¶çŸ³åŒ çš„ç¨œé¡",

    # æ©Ÿåˆ¶é¡
    "ç²¾ç…‰çš„æƒ…æ„Ÿ", "ç²¾é«“", "é«˜éšç²¾é«“", "ç¢‘ç‰Œ", "éºç‰©", "ä»»å‹™ç‰©å“",

    # è£å‚™èˆ‡é“å…·é¡
    "å‚³å¥‡è£å‚™", "æŠ€èƒ½å¯¶çŸ³", "é å…†", "æ¢éšªæ–‡ç‰©", "æ¢éšªæ—¥èªŒ",

    # åœ°åœ–èˆ‡ç¢ç‰‡é¡
    "é«˜ç´šåœ°åœ–", "ç‰¹æ®Šåœ°åœ–", "ç•°åŸŸé‘„å¹£", "åŸå¡ç¢ç‰‡", "å¹»åƒç¢ç‰‡", "è£‚ç—•ç¢ç‰‡", "è¿·å®®é‘°åŒ™",

    # å…¶ä»–
    "è©²æ›´æ–°éæ¿¾å™¨å•¦", "æ­å–œã€‚ä½ å¾ˆå¹¸é‹å‘¢"
]

# å…è¨±é¸æ“‡è§’è‰² å–æ±ºæ–¼ä½ è³‡æ–™å¤¾åç¨± å¯ä»¥è‡ªå·±èª¿æ•´
character_model = "ã€å´©é“ã€‘æµè¤"

# å„²å­˜ API å›æ‡‰çµæœ
responses = []

# é€æ¢è«‹æ±‚ API
for text in text_list:
    payload = {
        "data": [
            text,  # 0: è¼¸å…¥æ–‡æœ¬
            character_model,  # 1: è§’è‰²æ¨¡å‹
            "default",  # 2: æƒ…æ„Ÿ
            None,  # 3: æœªçŸ¥åƒæ•¸ (åŸå§‹è«‹æ±‚ä¸­çš„ `null`)
            "",  # 4: ç©ºå­—ä¸²
            "auto",  # 5: èªè¨€æ¨¡å¼
            0.85,  # 6: é€Ÿåº¦
            "auto",  # 7: èªè¨€
            "cut5",  # 8: æŒ‰æ¨™é»ç¬¦è™Ÿ
            50,  # 9: æœ€å¤§é•·åº¦
            10,  # 10: æ‰¹é‡è™•ç†å¤§å°
            -1,  # 11: éš¨æ©Ÿç¨®å­
            True,  # 12: å¹³è¡Œæ¨ç†
            5,  # 13: å–æ¨£ Top-k
            0.8,  # 14: Top-p
            0.8,  # 15: æº«åº¦
            1.35  # 16: é‡è¤‡æ‡²ç½°
        ],
        "event_data": None,
        "fn_index": 3,  # é€™æ˜¯ API å¿…è¦çš„ç´¢å¼•
        "trigger_id": 51,  # API å…§éƒ¨åƒæ•¸ï¼Œå¯èƒ½æœƒè®Šå‹•
        "session_hash": "auto"  # è‡ªå‹•ç”¢ç”Ÿ session_hash
    }

    # ç™¼é€ POST è«‹æ±‚
    print(f"ğŸš€ ç™¼é€è«‹æ±‚: æ–‡æœ¬='{text}'ï¼Œè§’è‰²='{character_model}'")
    response = requests.post(API_URL, json=payload)

    if response.status_code == 200:
        print(f"âœ… æˆåŠŸ: {text}")
        responses.append({"text": text, "status": "æˆåŠŸ", "response": response.json()})
    else:
        print(f"âŒ å¤±æ•—: {text}, ç‹€æ…‹ç¢¼={response.status_code}")
        responses.append({"text": text, "status": "å¤±æ•—", "error": response.text})

    # **é¿å… API éè¼‰ï¼ŒåŠ å…¥çŸ­æš«å»¶é²**
    time.sleep(10)

# **è¼¸å‡ºæ‰€æœ‰è«‹æ±‚çµæœ**
print("\nğŸ“œ **API å‘¼å«çµæœ**")
for result in responses:
    print(f"- æ–‡æœ¬: {result['text']}, ç‹€æ…‹: {result['status']}")